<div class="page-container">

  <div class="top-bar">
    <button class="btn-new" (click)="openDialog()">
      <svg width="16" height="16" ...>...</svg>
      <span>Ø¬Ø¯ÙŠØ¯</span>
    </button>
  </div>

  <div class="filter-bar">
    <input type="text" [(ngModel)]="search" (input)="applyFilter()" placeholder="Ø¨Ø­Ø« ...">
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <!-- <th>#</th> -->
          <th>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
          <th>Ø§Ù„ØµÙ </th>
          <th>Ø±Ù‚Ù… Ø§Ù„ØªØ±Ù…</th>
          <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
          <th>ØªØ¹Ø¯ÙŠÙ„</th>
          <th>Ø­Ø°Ù</th>
        </tr>
      </thead>

      <tbody>
        @for (g of filtered; track g.id) {
        <tr>
          <!-- <td>{{ g.id }}</td> -->
          <td>{{ g.stage?.name_ar || 'â€”' }}</td>
          <td>{{ g.name_ar }}</td>
          <td>{{ g.name_en }}</td>
          <td>{{ g.level_order }}</td>

          <td>
            <button class="icon-btn-table edit" (click)="edit(g)">âœ</button>
          </td>

          <td>
            <button class="icon-btn-table delete" (click)="delete(g.id)">ğŸ—‘</button>
          </td>
        </tr>
        }
      </tbody>

    </table>
  </div>
</div>


@if (isDialogOpen) {
<div class="dialog-overlay" (click)="closeDialog()">
  <div class="dialog-box" (click)="$event.stopPropagation()">

    <div class="dialog-header">
      <button class="close-btn" (click)="closeDialog()">âœ–</button>
      <h3>{{ dialogTitle }}</h3>
    </div>

    <form [formGroup]="form" class="dialog-body">

      <label>Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</label>

      <select formControlName="stage_id">
        <option value="" disabled>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©</option>

        @for (stage of stages; track stage.id) {
        <option [value]="stage.id">
          {{ stage.name_ar }}
        </option>
        }
      </select>


      <label>Ø§Ù„Ø§Ø³Ù… Ø¹Ø±Ø¨ÙŠ</label>
      <input formControlName="name_ar">

      <label>Ø§Ù„ØªØ±Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label>

      <select formControlName="name_en">
        <option value="term1" label="Ø§Ù„ØªØ±Ù… Ø§Ù„Ø§ÙˆÙ„ "></option>
        <option value="term2" label="Ø§Ù„ØªØ±Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ "></option>
      </select>


      <label>Ø§Ù„ØªØ±ØªÙŠØ¨</label>
      <input type="number" formControlName="level_order">

      <div class="footer-buttons">
        <button class="btn-save" type="button" (click)="save()">ğŸ’¾ Ø­ÙØ¸</button>
        <button class="btn-exit" type="button" (click)="closeDialog()">âŒ Ø®Ø±ÙˆØ¬</button>
      </div>

    </form>
  </div>
</div>
}
