<div class="page-container">

  <div class="top-bar">
    <button class="btn-new" (click)="openDialog()">
      <span>ุฌุฏูุฏ</span>
    </button>
  </div>

  <div class="filter-bar">
    <input type="text" [(ngModel)]="search" (input)="applyFilter()" placeholder="ุจุญุซ ุนู ุงูุฏุฑุณ ...">
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <!-- <th>ุฑูู ุงูุฏุฑุณ</th> -->
          <th>ูุณุงุฑ ููู ุงูุฏุฑุณ</th>
          <th>ุงูุตูุฑุฉ ุงููุตุบูุฑุฉ</th>
          <th>ูุฏุฉ ุงูุฏุฑุณ (ุจุงูุซูุงูู)</th>
          <th>ุงููุต ุงููุฑุงูู (ุนุฑุจู)</th>
          <th>ุงููุต ุงููุฑุงูู (ุฅูุฌููุฒู)</th>
          <th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
          <td>ุฃุถุงูุฉ </td>
          <td> ุชุนุฏูู </td>
        </tr>
      </thead>

      <tbody>
        @for (media of filtered; track media.id) {
        <tr>
          <!-- <td>{{ media.id }}</td> -->
          <td>{{ media.file_path }}</td>
          <td>{{ media.thumbnail_path }}</td>
          <td>{{ media.duration_sec }}</td>
          <td>{{ media.transcription_ar }}</td>
          <td>{{ media.transcription_en }}</td>
          <td>{{ media.created_at | date:'short' }}</td>
          <td>
            <button class="icon-btn-table edit" (click)="edit(media)">โ</button>
          </td>

          <td>
            <button class="icon-btn-table delete" (click)="delete(media.id)">๐</button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>

@if (isDialogOpen) {
<div class="dialog-overlay" (click)="closeDialog()">
  <div class="dialog-box" (click)="$event.stopPropagation()">

    <div class="dialog-header">
      <button class="close-btn" (click)="closeDialog()">โ</button>
      <h3>{{ dialogTitle }}</h3>
    </div>

    <form [formGroup]="form" class="dialog-body">
      <div class="form-grid">

        <!-- ุงูุนููุฏ ุงูุฃูู -->
        <div class="form-col">

          <label>ูุณุงุฑ ููู ุงูุฏุฑุณ</label>
          <input type="text" formControlName="file_path" placeholder="ูุซุงู: /media/lessons/video.mp4" />

          <label>ุงูุตูุฑุฉ ุงููุตุบูุฑุฉ</label>
          <input type="text" formControlName="thumbnail_path" placeholder="ูุซุงู: /media/thumbnails/img.jpg" />

          <label>ูุฏุฉ ุงูุฏุฑุณ (ุจุงูุซูุงูู)</label>
          <input type="number" formControlName="duration_sec" placeholder="ูุซุงู: 120" min="1" />

        </div>

        <!-- ุงูุนููุฏ ุงูุซุงูู -->
        <div class="form-col">

          <label>ุงููุต ุงููุฑูู (ุนุฑุจู)</label>
          <textarea formControlName="transcription_ar" placeholder="ุงูุชุจ ุงููุต ุงูุนุฑุจู ุงููุฑุงูู ููููุฏูู"></textarea>

          <label>ุงููุต ุงููุฑูู (ุฅูุฌููุฒู)</label>
          <textarea formControlName="transcription_en" placeholder="Write the English transcription"></textarea>

          <label>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</label>
          <input type="datetime-local" formControlName="created_at" />

        </div>

      </div>


      <div class="footer-buttons">
        <button type="button" class="btn-save" (click)="save()">๐พ ุญูุธ</button>
        <button type="button" class="btn-exit" (click)="closeDialog()">โ ุฎุฑูุฌ</button>
      </div>

    </form>
  </div>
</div>
}
