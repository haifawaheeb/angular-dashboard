<div class="page-container">

  <!-- Top Bar -->
  <div class="top-bar">
    <button class="btn-new" (click)="openDialog()">Ø¬Ø¯ÙŠØ¯</button>
  </div>

  <!-- Table -->
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ø·Ø§Ù„Ø¨</th>
          <th>Ø§Ù„Ø­ØµØ©</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
          <th>ØªØ¹Ø¯ÙŠÙ„</th>
          <th>Ø­Ø°Ù</th>
        </tr>
      </thead>

      <tbody>
        @for (item of filtered; track item.id) {
          <tr>
            <td>{{ item.student_name }}</td>
            <td>{{ item.session_name }}</td>
            <td>{{ item.status }}</td>
            <td>{{ item.recorded_at | date:'yyyy-MM-dd' }}</td>

            <td><button type="button" (click)="edit(item)">âœ</button></td>
            <td><button type="button" (click)="delete(item.id)">ğŸ—‘</button></td>
          </tr>
        }
      </tbody>

    </table>
  </div>

</div>

<!-- Dialog -->
@if (isDialogOpen) {
  <div class="dialog-overlay" (click)="closeDialog()">
    <div class="dialog-box" (click)="$event.stopPropagation()">

      <div class="dialog-header">
        <h3>{{ dialogTitle }}</h3>
        <button type="button" (click)="closeDialog()">âœ–</button>
      </div>

      <form [formGroup]="form">

        <!-- Session -->
        <label>Ø§Ù„Ø­ØµØ©</label>
        <select formControlName="session_id">
          <option value="">Ø§Ø®ØªØ± Ø­ØµØ©</option>
          @for (x of sessions; track trackById) {
            <option [value]="x.id">{{ x.label }}</option>
          }
        </select>

        <!-- Student -->
        <label>Ø§Ù„Ø·Ø§Ù„Ø¨</label>
        <select formControlName="student_id">
          <option value="">Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨</option>
          @for (s of students; track trackById) {
            <option [value]="s.id">{{ s.label }}</option>
          }
        </select>

        <!-- Status -->
        <label>Ø§Ù„Ø­Ø§Ù„Ø©</label>
        <select formControlName="status">
          <option value="present">Ø­Ø§Ø¶Ø±</option>
          <option value="absent">ØºØ§Ø¦Ø¨</option>
          <option value="late">Ù…ØªØ£Ø®Ø±</option>
        </select>

        <div class="footer-buttons">
          <button type="button" (click)="save()">ğŸ’¾ Ø­ÙØ¸</button>
          <button type="button" (click)="closeDialog()">âŒ Ø®Ø±ÙˆØ¬</button>
        </div>

      </form>

    </div>
  </div>
}
